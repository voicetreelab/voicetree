/**
 * Floating Windows CSS
 *
 * Styles for the floating window overlay and individual windows
 */

/* Overlay container - sibling to cytoscape container */
.cy-floating-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1000;
  transform-origin: top left;
}

/* Individual floating windows */
.cy-floating-window {
  position: absolute;
  pointer-events: auto;
  min-width: 300px;
  min-height: 200px;
  /* max-height: 600px; */ /* Disabled to allow terminal windows to expand freely */
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  color: var(--foreground);
}

/* Window wrapper container */
.cy-floating-window-wrapper {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
}

/* Title bar - compact for editors, standard for terminals */
.cy-floating-window-title {
  padding: 4px 8px;
  background-color: var(--muted);
  border-bottom: 1px solid var(--border);
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  user-select: none;
  cursor: move;
}

/* Terminal title bar - standard height with title visible */
.cy-floating-window-terminal .cy-floating-window-title {
  padding: 8px 12px;
  justify-content: space-between;
}

.cy-floating-window-title.dragging {
  cursor: grabbing;
}

/* Title text - hidden for editors (compact bar) */
.cy-floating-window-title-text {
  display: none;
}

/* Terminal title text - visible */
.cy-floating-window-terminal .cy-floating-window-title-text {
  display: block;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Fullscreen button */
.cy-floating-window-fullscreen {
  all: unset;
  cursor: pointer;
  font-size: 14px;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 4px;
}

.cy-floating-window-fullscreen:hover {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
}

/* Close button */
.cy-floating-window-close {
  all: unset;
  cursor: pointer;
  font-size: 16px;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cy-floating-window-close:hover {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
}

/* Content area */
.cy-floating-window-content {
  flex: 1;
  overflow: auto;
}

/* Resizable windows */
.cy-floating-window.resizable {
  resize: both;
  overflow: auto;
}

/* Shadow nodes (invisible) */
.floating-window-node {
  opacity: 0;
}

/* Horizontal context menu pill backgrounds
 * Matches the floating window title bar color (--muted)
 * Supports light/dark mode via CSS variables
 * pointer-events: auto to re-enable clicks (parent container has pointer-events: none) */
.horizontal-menu-pill {
  display: flex;
  flex-direction: row;
  align-items: center;
  background: var(--muted);
  border-radius: 16px;
  padding: 4px 8px;
  pointer-events: auto;
}

/* CodeMirror Editor Styles */
/*// TODO BROKEN, frontmatter styling is applying to titles as well*/
/*!* YAML Frontmatter - Smaller, de-emphasized styling *!*/
/*!* Target DashLine (---) and FrontmatterContent nodes *!*/
/*.cm-content .cm-meta {*/
/*  font-size: 0.75rem;*/
/*  color: #888;*/
/*}*/

/* Ensure frontmatter delimiters (---) are visible */
/*.cm-line .cm-meta {*/
/*  display: inline;*/
/*}*/

/* rich-markdoc styles - hide formatting marks when not editing */
.cm-markdoc-hidden {
  display: none !important;
}

.cm-markdoc-bullet * {
  display: none;
}

.cm-markdoc-bullet::after {
  display: inline !important;
  color: darkgray;
  content: '•';
}

.cm-markdoc-renderBlock {
  font-family: sans-serif;
}

.cm-markdoc-renderBlock table {
  border-collapse: collapse;
  margin-left: 5px;
}

.cm-markdoc-renderBlock th,
.cm-markdoc-renderBlock td {
  border: 1px solid lightgray;
  padding: 5px 10px;
}

.cm-markdoc-renderBlock blockquote {
  border-left: 3px solid lightgray;
  padding-left: 10px;
  margin: 0 0 0 15px;
}

.cm-markdoc-renderBlock p {
  margin: 3px;
}

.cm-markdoc-tag {
  color: darkgray;
}

.cm-markdoc-code {
  font-family: monospace;
}

/* Heading 1 (single #) - Smaller size with underline retained */
/* Override the highlightStyle from codemirror-rich-markdoc */
/*.cm-content .cm-heading1 {*/
/*  font-size: 18px !important;*/
/*  text-decoration: underline !important;*/
/*  font-weight: bold;*/
/*  font-family: sans-serif;*/
/*}*/

/*THIS DOESNT WORK CodeMirror's auto-generated class names (`ͼo`, `ͼ7`) are  unstable and change between builds/loads.  Use CodeMirror's official `HighlightStyle.define()` API*/
/*.ͼo .ͼ7 {*/
/*    font-size: 18px !important;*/
/*    text-decoration: underline !important;*/
/*}*/